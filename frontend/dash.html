<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Eco Dashboard | GreenTech Global</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* [Styles as before: root vars, layout, panels, menu, modal, etc.] */
    :root {
      --green-light: #c8e6c9;
      --green-dark: #2e7d32;
      --green-medium: #81c784;
    }
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background: linear-gradient(to right, #e8f5e9, #c8e6c9); color: var(--green-dark); overflow-x: hidden; }
    .dashboard { padding: 20px; }
    header { display: flex; justify-content: space-between; align-items: center; }
    header h1 { font-size: 32px; }
    .account { background: var(--green-light); padding: 10px 20px; border-radius: 30px; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .account-panel { position: fixed; top: 70px; right: 20px; background: white; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); width: 250px; padding: 15px; display: none; z-index: 1000; }
    .account-panel.active { display: block; }
    .devices-section { background: #f1f8e9; padding: 20px; border-radius: 15px; margin-top: 30px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
    #device-list { list-style: none; padding-left: 0; }
    #device-list li { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #c5e1a5; cursor: pointer; }
    .remove-btn { background: transparent; border: none; color: red; font-size: 18px; cursor: pointer; }
    #add-device-btn { margin-top: 10px; padding: 10px 20px; background: var(--green-medium); border: none; color: white; border-radius: 10px; cursor: pointer; }
    .chart-box { background: #e8f5e9; padding: 20px; border-radius: 15px; flex: 1; min-width: 300px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .usage-charts { display: flex; gap: 30px; margin-top: 40px; flex-wrap: wrap; }
    .bottom-left-btn, .ai-assistant { position: fixed; border: none; font-size: 18px; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: #fff; }
    .bottom-left-btn { bottom: 20px; left: 20px; background: var(--green-medium); padding: 15px 20px; border-radius: 50px; z-index: 999; }
    .ai-assistant { bottom: 20px; right: 20px; background: #43a047; border-radius: 50%; width: 55px; height: 55px; font-size: 24px; z-index: 999; }
    .chat-box { position: fixed; bottom: 90px; right: 20px; background: white; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); width: 300px; max-height: 400px; display: none; flex-direction: column; overflow: hidden; z-index: 1000; }
    .chat-box.active { display: flex; }
    .chat-header { background: var(--green-medium); color: white; padding: 12px; font-weight: bold; }
    .chat-body { padding: 10px; flex-grow: 1; overflow-y: auto; font-size: 14px; }
    .chat-input { border: none; border-top: 1px solid #ccc; padding: 10px; }
    .menu-panel { position: fixed; top: 0; left: -260px; width: 260px; height: 100%; background: rgba(197,225,165,0.92); backdrop-filter: blur(8px); padding: 20px; transition: left 0.4s ease; z-index: 998; }
    .menu-panel.active { left: 0; box-shadow: 4px 0 10px rgba(0,0,0,0.15); }
    .menu-panel h3, .menu-panel ul { margin: 0; padding: 0; }
    .menu-panel ul li { margin: 12px 0; font-weight: 500; cursor: pointer; }
    .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 997; }
    .overlay.active { display: block; background: rgba(0,0,0,0.3); }
    .device-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%,-50%) scale(0.95); width:90%; max-width:400px; background:rgba(197,225,165,0.95); backdrop-filter:blur(8px); padding:25px; border-radius:20px; box-shadow:0 8px 30px rgba(0,0,0,0.2); z-index:1001; display:none; transition:all 0.3s ease; }
    .device-modal.active { display:block; transform:translate(-50%,-50%) scale(1); }
    .device-modal-content h3 { margin-top:0; color:var(--green-dark); }
    .device-modal input { width:100%; padding:10px; margin-top:15px; border-radius:8px; border:1px solid #a5d6a7; }
    .modal-buttons { margin-top:20px; display:flex; justify-content:flex-end; gap:10px; }
    #saveDeviceBtn { background:#388e3c; color:white; }
    #cancelDeviceBtn { background:#ccc; }
    .close-modal { float:right; font-size:22px; cursor:pointer; color:var(--green-dark); }
  </style>
</head>
<body>
  <div class="menu-panel" id="menuPanel">
    <h3>🌿 Eco Menu</h3>
    <ul>
      <li>🏠 Home</li><li>📦 Devices</li><li>📈 Analytics</li><li>⚙️ Settings</li>
    </ul>
  </div>
  <div class="overlay" id="menuOverlay"></div>

  <div class="dashboard">
    <header>
      <h1>🌍 Eco Dashboard</h1>
      <div class="account" id="accountBtn">👤 My Account</div>
    </header>
    <div class="account-panel" id="accountPanel">
      <p><strong>Name:</strong> Jane Green</p>
      <p><strong>Email:</strong> jane@greentech.com</p>
      <p><strong>Total Usage:</strong> 1520 kWh</p>
    </div>

    <section class="devices-section">
      <h2>Connected Devices</h2>
      <ul id="device-list">
        <li data-electric="[10,12,15,13,14,16,18]" data-water="[5,6,7,6,6,7,8]">🌞 Solar Panel <button class="remove-btn">🗑️</button></li>
        <li data-electric="[7,8,9,10,9,8,10]" data-water="[20,25,22,23,24,26,27]">💧 Rainwater Tank <button class="remove-btn">🗑️</button></li>
        <li data-electric="[3,4,3,4,5,4,3]" data-water="[2,3,2,3,3,2,3]">🌬️ Air Quality Sensor <button class="remove-btn">🗑️</button></li>
      </ul>
      <button id="add-device-btn">➕ Add Device</button>
    </section>

    <section class="usage-charts">
      <div class="chart-box"><h3>Electricity Usage</h3><canvas id="electricChart"></canvas></div>
      <div class="chart-box"><h3>Water Usage</h3><canvas id="waterChart"></canvas></div>
    </section>
  </div>

  <button class="ai-assistant" id="ai-btn">🤖</button>
  <div class="chat-box" id="chat-box">
    <div class="chat-header">AI Assistant</div>
    <div class="chat-body" id="chat-body"><p><strong>AI:</strong> Hi! Need help with your usage?</p></div>
    <input class="chat-input" placeholder="Ask me something..." onkeydown="handleChat(event)" />
  </div>
  <button class="bottom-left-btn" id="menuToggle">🌿 Menu</button>

  <div class="overlay" id="deviceOverlay"></div>
  <div class="device-modal" id="deviceModal">
    <div class="device-modal-content">
      <span class="close-modal" id="closeDeviceModal">&times;</span>
      <h3>Add New Device</h3>
      <input id="deviceInput" placeholder="Enter device name" />
      <div class="modal-buttons">
        <button id="saveDeviceBtn">Add Device</button>
        <button id="cancelDeviceBtn">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const menuPanel = document.getElementById('menuPanel'), menuOverlay = document.getElementById('menuOverlay');
      document.getElementById('menuToggle').onclick = () => menuPanel.classList.toggle('active') & menuOverlay.classList.toggle('active');
      menuOverlay.onclick = () => menuPanel.classList.remove('active') & menuOverlay.classList.remove('active');
      menuPanel.querySelectorAll('li').forEach(item => item.onclick = () => menuPanel.classList.remove('active') & menuOverlay.classList.remove('active'));

      document.getElementById('accountBtn').onclick = () => document.getElementById('accountPanel').classList.toggle('active');
      document.getElementById('ai-btn').onclick = () => document.getElementById('chat-box').classList.toggle('active');
      window.handleChat = e => {
        if(e.key==='Enter') {
          const input = e.target, msg = input.value.trim();
          if(msg) {
            const chat = document.getElementById('chat-body');
            chat.innerHTML += `<p><strong>You:</strong> ${msg}</p><p><strong>AI:</strong> Sure! 🌱</p>`;
            chat.scrollTop = chat.scrollHeight;
            input.value='';
          }
        }
      };

      const deviceModal = document.getElementById('deviceModal'), deviceOverlay = document.getElementById('deviceOverlay');
      document.getElementById('add-device-btn').onclick = () => deviceModal.classList.add('active') & deviceOverlay.classList.add('active');
      document.getElementById('closeDeviceModal').onclick = closeDModal;
      document.getElementById('cancelDeviceBtn').onclick = closeDModal;
      deviceOverlay.onclick = closeDModal;
      function closeDModal(){ deviceModal.classList.remove('active'); deviceOverlay.classList.remove('active'); }

      document.getElementById('saveDeviceBtn').onclick = () => {
        const name = document.getElementById('deviceInput').value.trim();
        if(name) {
          const li = document.createElement('li');
          li.dataset.electric = "[5,5,5,5,5,5,5]";
          li.dataset.water   = "[5,5,5,5,5,5,5]";
          li.innerHTML = `🔌 ${name} <button class="remove-btn">🗑️</button>`;
          document.getElementById('device-list').appendChild(li);
          closeDModal();
        } else alert("Enter device name!");
      };

      document.getElementById('device-list').addEventListener('click', e => {
        if(e.target.classList.contains('remove-btn')) e.target.closest('li').remove();
        else if(e.target.tagName==='LI' || e.target.parentElement.tagName==='LI') {
          const li = e.target.tagName==='LI'? e.target : e.target.parentElement;
          const eData = JSON.parse(li.dataset.electric), wData = JSON.parse(li.dataset.water);
          electricChart.data.datasets[0].data = eData;
          waterChart.data.datasets[0].data = wData;
          electricChart.update(); waterChart.update();
        }
      });

      const electricChart = new Chart(document.getElementById('electricChart'), {
        type: 'line', data: { labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'], datasets:[{label:'kWh', data:[0,0,0,0,0,0,0], borderColor:'#388e3c', backgroundColor:'rgba(56,142,60,0.2)', fill:true, tension:0.3}]}, options:{responsive:true}
      });
      const waterChart = new Chart(document.getElementById('waterChart'), {
        type: 'bar', data: { labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'], datasets:[{label:'Liters', data:[0,0,0,0,0,0,0], backgroundColor:'#66bb6a'}]}, options:{responsive:true}
      });
    });
  </script>
</body>
</html>

