<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Eco Dashboard | GreenTech Global</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
  <div class="menu-panel" id="menuPanel">
    <h3>🌿 Eco Menu</h3>
    <ul>
      <li>🏠 Home</li><li>📦 Devices</li><li>📈 Analytics</li><li>⚙️ Settings</li>
      <li><a href="{{ url_for('logout') }}" style="color: inherit; text-decoration: none;">➡️ Logout</a></li>
    </ul>
  </div>
  <div class="overlay" id="menuOverlay"></div>

  <div class="dashboard">
    <header>
      <h1>🌍 Eco Dashboard</h1>
      <div class="account" id="accountBtn">👤 My Account</div>
    </header>
    <div class="account-panel" id="accountPanel">
      <p><strong>Name:</strong> {{ fullname }}</p>
      <p><strong>Email:</strong> {{ email }}</p>
      <p><strong>Total Usage:</strong> 1520 kWh</p>
    </div>

    <section class="devices-section">
      <h2>Connected Devices</h2>
      <ul id="device-list">
        <li data-electric="[10,12,15,13,14,16,18]" data-water="[5,6,7,6,6,7,8]">🌞 Solar Panel <button class="remove-btn">🗑️</button></li>
        <li data-electric="[7,8,9,10,9,8,10]" data-water="[20,25,22,23,24,26,27]">💧 Rainwater Tank <button class="remove-btn">🗑️</button></li>
        <li data-electric="[3,4,3,4,5,4,3]" data-water="[2,3,2,3,3,2,3]">🌬️ Air Quality Sensor <button class="remove-btn">🗑️</button></li>
      </ul>
      <button id="add-device-btn">➕ Add Device</button>
    </section>

    <section class="usage-charts">
      <div class="chart-box"><h3>Electricity Usage</h3><canvas id="electricChart"></canvas></div>
      <div class="chart-box"><h3>Water Usage</h3><canvas id="waterChart"></canvas></div>
    </section>
  </div>

  <button class="ai-assistant" id="ai-btn">🤖</button>
  <div class="chat-box" id="chat-box">
    <div class="chat-header">AI Assistant</div>
    <div class="chat-body" id="chat-body"><p><strong>AI:</strong> Hi! Need help with your usage?</p></div>
    <input class="chat-input" placeholder="Ask me something..." onkeydown="handleChat(event)" />
  </div>
  <button class="bottom-left-btn" id="menuToggle">🌿 Menu</button>

  <div class="overlay" id="deviceOverlay"></div>
  <div class="device-modal" id="deviceModal">
    <div class="device-modal-content">
      <span class="close-modal" id="closeDeviceModal">&times;</span>
      <h3>Add New Device</h3>
      <input id="deviceInput" placeholder="Enter device name" />
      <div class="modal-buttons">
        <button id="saveDeviceBtn">Add Device</button>
        <button id="cancelDeviceBtn">Cancel</button>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='dashboard.js') }}"></script>
</body>
</html>
